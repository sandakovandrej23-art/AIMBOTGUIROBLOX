local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local mouse = player:GetMouse()
local camera = Workspace.CurrentCamera

wait(3)

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AimbotGUI"
screenGui.Parent = player.PlayerGui
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 280, 0, 200)
mainFrame.Position = UDim2.new(0.1, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
mainFrame.BackgroundTransparency = 0
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0, 0, 0)
shadow.Thickness = 3
shadow.Transparency = 0.7
shadow.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
title.BackgroundTransparency = 0
title.BorderSizePixel = 0
title.Text = "AIMBOT"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12)
titleCorner.Parent = title

local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 30, 0, 30)
minimizeButton.Position = UDim2.new(0.85, 0, 0.05, 0)
minimizeButton.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "-"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.TextSize = 18
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.Parent = mainFrame

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = minimizeButton

local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, 0, 1, -40)
contentFrame.Position = UDim2.new(0, 0, 0, 40)
contentFrame.BackgroundTransparency = 1
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainFrame

local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0.8, 0, 0, 50)
toggleButton.Position = UDim2.new(0.1, 0, 0.1, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
toggleButton.BorderSizePixel = 0
toggleButton.Text = "START AIMBOT"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextSize = 16
toggleButton.Font = Enum.Font.GothamSemibold
toggleButton.Parent = contentFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = toggleButton

local buttonShadow = Instance.new("UIStroke")
buttonShadow.Color = Color3.fromRGB(255, 255, 255)
buttonShadow.Thickness = 1
buttonShadow.Transparency = 0.5
buttonShadow.Parent = toggleButton

local rangeContainer = Instance.new("Frame")
rangeContainer.Name = "RangeContainer"
rangeContainer.Size = UDim2.new(0.8, 0, 0, 50)
rangeContainer.Position = UDim2.new(0.1, 0, 0.6, 0)
rangeContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
rangeContainer.BackgroundTransparency = 0.1
rangeContainer.BorderSizePixel = 0
rangeContainer.Parent = contentFrame

local rangeCorner = Instance.new("UICorner")
rangeCorner.CornerRadius = UDim.new(0, 8)
rangeCorner.Parent = rangeContainer

local rangeText = Instance.new("TextLabel")
rangeText.Name = "RangeText"
rangeText.Size = UDim2.new(0.4, 0, 1, 0)
rangeText.Position = UDim2.new(0, 0, 0, 0)
rangeText.BackgroundTransparency = 1
rangeText.Text = "RANGE:"
rangeText.TextColor3 = Color3.fromRGB(200, 200, 200)
rangeText.TextSize = 14
rangeText.Font = Enum.Font.Gotham
rangeText.TextXAlignment = Enum.TextXAlignment.Left
rangeText.Parent = rangeContainer

local rangePadding = Instance.new("UIPadding")
rangePadding.PaddingLeft = UDim.new(0, 10)
rangePadding.Parent = rangeText

local rangeBox = Instance.new("TextBox")
rangeBox.Name = "RangeBox"
rangeBox.Size = UDim2.new(0.5, 0, 0.7, 0)
rangeBox.Position = UDim2.new(0.45, 0, 0.15, 0)
rangeBox.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
rangeBox.BorderSizePixel = 0
rangeBox.Text = "50"
rangeBox.TextColor3 = Color3.fromRGB(255, 255, 255)
rangeBox.TextSize = 14
rangeBox.Font = Enum.Font.Gotham
rangeBox.PlaceholderText = "Range..."
rangeBox.Parent = rangeContainer

local rangeBoxCorner = Instance.new("UICorner")
rangeBoxCorner.CornerRadius = UDim.new(0, 6)
rangeBoxCorner.Parent = rangeBox

local rangeBoxStroke = Instance.new("UIStroke")
rangeBoxStroke.Color = Color3.fromRGB(100, 100, 120)
rangeBoxStroke.Thickness = 1
rangeBoxStroke.Parent = rangeBox

local madeByText = Instance.new("TextLabel")
madeByText.Name = "MadeByText"
madeByText.Size = UDim2.new(1, 0, 0, 20)
madeByText.Position = UDim2.new(0, 0, 0.9, 0)
madeByText.BackgroundTransparency = 1
madeByText.Text = "made by duller"
madeByText.TextColor3 = Color3.fromRGB(150, 150, 150)
madeByText.TextSize = 11
madeByText.Font = Enum.Font.Gotham
madeByText.TextTransparency = 0.3
madeByText.Parent = contentFrame

local crosshairGui = Instance.new("ScreenGui")
crosshairGui.Name = "CrosshairGUI"
crosshairGui.Parent = player.PlayerGui
crosshairGui.ResetOnSpawn = false

local crosshairFrame = Instance.new("Frame")
crosshairFrame.Name = "CrosshairFrame"
crosshairFrame.Size = UDim2.new(0, 100, 0, 100)
crosshairFrame.Position = UDim2.new(0.5, -50, 0.5, -50)
crosshairFrame.BackgroundTransparency = 1
crosshairFrame.BorderSizePixel = 0
crosshairFrame.Visible = false
crosshairFrame.Parent = crosshairGui

local circle = Instance.new("Frame")
circle.Name = "Circle"
circle.Size = UDim2.new(1, 0, 1, 0)
circle.BackgroundTransparency = 1
circle.BorderSizePixel = 0
circle.Parent = crosshairFrame

local circleStroke = Instance.new("UIStroke")
circleStroke.Color = Color3.fromRGB(255, 255, 255)
circleStroke.Thickness = 2
circleStroke.Transparency = 0
circleStroke.Parent = circle

local circleCorner = Instance.new("UICorner")
circleCorner.CornerRadius = UDim.new(1, 0)
circleCorner.Parent = circle

local isAimbotActive = false
local isMinimized = false
local isDragging = false
local dragStart, frameStart
local aimbotConnection
local aimRange = 50

local function getClosestPlayerInRange()
    local closestPlayer = nil
    local closestDistance = aimRange
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local character = otherPlayer.Character
            local humanoid = character:FindFirstChild("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            
            if humanoid and humanoid.Health > 0 and rootPart then
                local screenPoint, onScreen = camera:WorldToScreenPoint(rootPart.Position)
                
                if onScreen then
                    local center = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y / 2)
                    local targetPos = Vector2.new(screenPoint.X, screenPoint.Y)
                    local distance = (center - targetPos).Magnitude
                    
                    if distance <= aimRange and distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = otherPlayer
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

local function aimAtPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return end
    
    local targetRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not targetRoot then return end
    
    local camera = Workspace.CurrentCamera
    local cameraPosition = camera.CFrame.Position
    local targetPosition = targetRoot.Position
    
    camera.CFrame = CFrame.lookAt(cameraPosition, targetPosition)
end

local function updateCrosshairColor(isTargetFound)
    if isTargetFound then
        circleStroke.Color = Color3.fromRGB(255, 50, 50)
    else
        circleStroke.Color = Color3.fromRGB(255, 255, 255)
    end
end

local function startAimbot()
    isAimbotActive = true
    toggleButton.Text = "STOP AIMBOT"
    toggleButton.BackgroundColor3 = Color3.fromRGB(220, 20, 60)
    crosshairFrame.Visible = true
    
    aimbotConnection = RunService.Heartbeat:Connect(function()
        if not isAimbotActive then return end
        
        local closestPlayer = getClosestPlayerInRange()
        
        if closestPlayer then
            aimAtPlayer(closestPlayer)
            updateCrosshairColor(true)
        else
            updateCrosshairColor(false)
        end
    end)
end

local function stopAimbot()
    isAimbotActive = false
    toggleButton.Text = "START AIMBOT"
    toggleButton.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
    crosshairFrame.Visible = false
    
    if aimbotConnection then
        aimbotConnection:Disconnect()
        aimbotConnection = nil
    end
end

local function toggleAimbot()
    if isAimbotActive then
        stopAimbot()
    else
        startAimbot()
    end
end

local function minimizeGUI()
    isMinimized = true
    contentFrame.Visible = false
    mainFrame.Size = UDim2.new(0, 280, 0, 40)
    minimizeButton.Text = "+"
    madeByText.Visible = false
end

local function maximizeGUI()
    isMinimized = false
    contentFrame.Visible = true
    mainFrame.Size = UDim2.new(0, 280, 0, 200)
    minimizeButton.Text = "-"
    madeByText.Visible = true
end

local function toggleMinimize()
    if isMinimized then
        maximizeGUI()
    else
        minimizeGUI()
    end
end

toggleButton.MouseButton1Click:Connect(toggleAimbot)

minimizeButton.MouseButton1Click:Connect(toggleMinimize)

rangeBox.FocusLost:Connect(function(enterPressed)
    local newRange = tonumber(rangeBox.Text)
    if newRange then
        aimRange = math.clamp(newRange, 10, 200)
        rangeBox.Text = tostring(aimRange)
        
        crosshairFrame.Size = UDim2.new(0, aimRange * 2, 0, aimRange * 2)
        crosshairFrame.Position = UDim2.new(0.5, -aimRange, 0.5, -aimRange)
    else
        rangeBox.Text = tostring(aimRange)
    end
end)

toggleButton.MouseEnter:Connect(function()
    local tween = TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.2
    })
    tween:Play()
end)

toggleButton.MouseLeave:Connect(function()
    local tween = TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0
    })
    tween:Play()
end)

minimizeButton.MouseEnter:Connect(function()
    local tween = TweenService:Create(minimizeButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.2
    })
    tween:Play()
end)

minimizeButton.MouseLeave:Connect(function()
    local tween = TweenService:Create(minimizeButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0
    })
    tween:Play()
end)

title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        isDragging = true
        dragStart = input.Position
        frameStart = mainFrame.Position
    end
end)

title.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch and isDragging then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            frameStart.X.Scale, 
            frameStart.X.Offset + delta.X,
            frameStart.Y.Scale, 
            frameStart.Y.Offset + delta.Y
        )
    end
end)

title.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        isDragging = false
    end
end)

local function onCharacterAdded(character)
    mainFrame.Visible = true
    if isAimbotActive then
        stopAimbot()
    end
end

player.CharacterAdded:Connect(onCharacterAdded)

if player.Character then
    onCharacterAdded(player.Character)
end

print("Aimbot GUI loaded! Made by duller")
